<!DOCTYPE html>
<html>
	<head>
        <link rel="stylesheet" href="https://pyscript.net/releases/2023.03.1/pyscript.css"/>
        <script defer src="https://pyscript.net/latest/pyscript.js"></script>
	<script type="text/javascript" src="webCode.js"></script>
	<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
	<link rel="stylesheet" type="text/css" href="style.css">
        <title>American Zip Code Visualizer</title>
	</head>
        <py-config>
		packages = ["matplotlib", "pandas", "folium", "seaborn", "plotly", "requests"] 
		terminal = false
        </py-config>
        <py-script src="https://raw.githubusercontent.com/Dravitar/LUISSDataVisProject/main/mapCode.py"></py-script>
        <py-script src="https://raw.githubusercontent.com/Dravitar/LUISSDataVisProject/main/webCode.py"></py-script>
        <py-script src="https://raw.githubusercontent.com/Dravitar/LUISSDataVisProject/main/Graphs%20ZIP%20CODES.py"></py-script>
	<header>
		<button class="tab active" onclick="showSection('main')">Main</button>
		<button class="tab" onclick="showSection('about')">About</button>
		<button class="tab" onclick="showSection('contact')">Contact</button>
	</header>
	<main id="main_section", style="text-align: center">
		<h1>Welcome to SalesTaxExplorer!</h1>
		<form>
			<label for="zip_code">Enter your zip code:</label>
			<input type="text" id="zip_code" name="zip_code">
			<label for="price">Enter the initial price of your item:</label>
			<input type="text" id="price" name="price">
			<button type="button" id="zipCodeSubmissionButton">Submit</button>
			<script>document.getElementById("zipCodeSubmissionButton").addEventListener("click", () => {
					price = document.getElementById("price").value;
					zip_code = document.getElementById("zip_code").value;
					const gZCG = pyscript.interpreter.globals.get('getZipCodeGraph');
					gZCG(zip_code, price);
				});
			</script>
		</form>
		<h3>Your total price would be $<span id="price_container">0.00</span> after state taxes.</h3>
		<div id="image_container"></div>
		<div id="map-container">
			<button type="button" id="show-map-button">Show US Map</button>
			<div id="usa-map"></div>
			<script type='text/javascript'>
				function plot(graph, chart) {
					var figure = [JSON.parse(graph)]
					Plotly.newPlot(chart, figure, {});
				};
				document.getElementById("show-map-button").addEventListener("click", () => {
					document.getElementById("show-map-button").style.visibility = "None";
					const mapLoad = pyscript.interpreter.globals.get('startMap');
					mapLoad();
				});
			</script>
		</div>
	</main>
	<section id="about_section" style="display:none">
		<h2>About</h2>
		<p>Some information about the application.</p>
		<p>State Sales Tax data from <a href="https://api-ninjas.com/api/salestax">API Ninjas</a>.</p>
		<p>Other state information from <a href="https://data.opendatasoft.com/explore/dataset/georef-united-states-of-america-zc-point%40public/table/">opendatasoft</a>.</p>
	</section>
	<section id="contact_section" style="display:none">
		<h2>Contact</h2>
		<ul>
			<li><a href="mailto:nathan.henderson@studenti.luiss.it">Email</a></li>
			<li><a href="https://www.linkedin.com/in/alex-henderson-056943197/">LinkedIn</a></li>
		</ul>
	</section>
	<footer>
	</footer>        
    </body>
</html>
